<style>
  .nav-btn {
  width: 55px;
  height: 55px;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(0,0,0,0.15);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: 0.3s;
  font-size: 22px;
}

.nav-btn:hover {
  background: #f5f5f5;
  transform: scale(1.05);
}

.nav-btn i {
  color: #333;
}

  /* Modal tetap di atas */
  .modal {
    z-index: 200000 !important;
  }

  .modal-backdrop {
    z-index: 199999 !important;
  }

  .modal-backdrop.show {
    opacity: 0.5 !important;
    pointer-events: auto !important;
  }

  /* ====================================================
     RESPONSIVE QUESTION IMAGE
     ==================================================== */
  #quiz-img {
    max-width: 100%;
    height: 80vh;
    object-fit: contain;
    margin: 0 auto;
  }

  /* Pada layar kecil (HP) */
  @media (max-width: 768px) {
    #quiz-img {
      max-width: fit-content;
      max-height: 60vh;
    }

    .container.py-5 {
      padding-top: 1rem !important;
      padding-bottom: 2rem !important;
    }

    .vs-btn {
      width: 100%;
      font-size: 18px;
      padding: 12px 16px;
    }
  }

  /* Pada layar sangat kecil */
  @media (max-width: 480px) {
    #quiz-img {
      max-height: 40vh;
    }
  }

  /* Desktop: gambar lebih besar tapi tetap proporsional */
  @media (min-width: 769px) {
    #quiz-img {
      width: auto;
      max-width: 50%;
      max-height: 70vh;
    }
  }

  /* Modal result image */
  #resultModal .img img {
    max-width: 40%;
    height: auto;
  }

  /* Tombol modal biar rapi */
  #resultModal .btn {
    font-size: 18px;
    padding: 10px 20px;
  }

  /* Animasi pop */
  .result-animate {
    animation: pop 0.45s ease-out;
  }

  @keyframes pop {
    0% {
      transform: scale(0.2);
      opacity: 0;
    }
    70% {
      transform: scale(1.15);
      opacity: 1;
    }
    100% {
      transform: scale(1);
    }
  }

  /* Efek benar (hijau glow) */
  .result-correct {
    filter: drop-shadow(0 0 10px rgba(0, 255, 120, 0.6));
  }

  /* Efek salah (merah glow) */
  .result-wrong {
    filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.6));
  }
</style>

<section class="vs-event--page bg-color6 space z-index-common">
  <div class="vs-event--ele1">
    <img
      src="/assets/img/elements/events-page-ele1.png"
      alt="event page ele1"
    />
  </div>
  <div class="vs-event--ele2">
    <img
      src="/assets/img/elements/events-page-ele2.png"
      alt="event page ele1"
    />
  </div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        <div class="vs-title text-center title-anime animation-style2">
          <div class="title-anime__wrap">
            <h5 class="vs-title__main">
              Aku Sayang Diriku, Jadi Aku Jaga Diriku
            </h5>
            <span class="vs-title__sub"
              >Kalau ada yang menyentuh bagian pribadiku, Aku harus bilang
              tidak</span
            >
            <div class="vs-event__btn">
              <button class="vs-btn btn-start">
                <span class="vs-btn__border"></span>Mulai!
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
<div class="container quiz-area py-5 text-center" style="display: none">
  <div class="d-flex justify-content-center align-items-center gap-4">

    <!-- Tombol Sebelumnya -->
    <div class="nav-btn btn-prev">
      <i class="fa-solid fa-arrow-left"></i>
    </div>

    <!-- Gambar di Tengah -->
    <div>
      <img id="quiz-img" src="" class="mb-3" />
      <div class="vs-event__btn">
        <button class="vs-btn answer-btn">
          <span class="vs-btn__border"></span>Apakah Boleh Disentuh?
        </button>
      </div>
    </div>

    <!-- Tombol Selanjutnya -->
    <div class="nav-btn btn-next-question">
      <i class="fa-solid fa-arrow-right"></i>
    </div>

  </div>
</div>

  </div>
</section>
<!-- Modal -->
<div class="modal fade" id="resultModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-4">
      <div class="vs-title text-center title-anime animation-style2">
        <div class="title-anime__wrap">
          <h5 class="vs-title__main" id="modalTitle">
            Aku Sayang Diriku, Jadi Aku Jaga Diriku
          </h5>
        </div>
      </div>

      <div class="img">
        <img
          id="resultImage"
          src=""
          alt="result"
          class="img-fluid result-animate"
        />
      </div>

      <div class="vs-event__btn mt-3">
        <button class="vs-btn btn-next" data-bs-dismiss="modal">
          <span class="vs-btn__border"></span>Selanjutnya!
        </button>
      </div>

      <audio id="audio-question" src=""></audio>
    </div>
  </div>
</div>

<script>
  let questions = [];
  let shuffledQuestions = [];
  let currentIndex = 0;
  let gameStarted = false;

  // Shuffle
  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function loadQuestion() {
    const q = shuffledQuestions[currentIndex];

    $("#resultImage").attr("src", function () {
      return q.answer
        ? "/assets/gif/mendengar/check.gif"
        : "/assets/gif/mendengar/cross.gif";
    });
    $("#modalTitle").text(
      q.answer ? "Boleh Disentuh" : "Jangan Disentuh"
    );
    $("#quiz-img").attr("src", q.questionImg);
    $("#audio-question").attr("src", q.audio);
  }

  // =====================================
  // EVENT LISTENER
  // =====================================
  $(document).ready(function () {
    // Load JSON
    $.getJSON("/constants/hear.json", function (data) {
      questions = data;
      shuffledQuestions = shuffle([...questions]);
    });

    // START
    $(".btn-start").on("click", function () {
      if (gameStarted) return;

      gameStarted = true;
      currentIndex = 0;
      loadQuestion();

      $(".quiz-area").fadeIn(300);
      $(".btn-start").fadeOut(300);
    });

    // PLAY AUDIO WHEN MODAL OPEN
    $(".modal").on("shown.bs.modal", function () {
      const audio = $("#audio-question")[0];
      audio.currentTime = 0;
      audio.play();
    });

    // BUTTON JAWAB (SHOW MODAL)
    $(".answer-btn").on("click", function () {
      if (!gameStarted) return;

      const modal = new bootstrap.Modal(document.getElementById("resultModal"));
      modal.show();
    });

    // NEXT QUESTION (inside modal)
    $("#resultModal .btn-next").on("click", function () {
      currentIndex++;

      if (currentIndex >= shuffledQuestions.length) {
        currentIndex = 0;
      }

      loadQuestion();
    });

    // =====================================
    // NEW: BUTTON NEXT OUTSIDE MODAL
    // =====================================
    $(".btn-next-question").on("click", function () {
      currentIndex++;

      if (currentIndex >= shuffledQuestions.length) currentIndex = 0;

      loadQuestion();
    });

    // =====================================
    // NEW: BUTTON PREVIOUS OUTSIDE MODAL
    // =====================================
    $(".btn-prev").on("click", function () {
      currentIndex--;

      if (currentIndex < 0) currentIndex = shuffledQuestions.length - 1;

      loadQuestion();
    });
  });
</script>
